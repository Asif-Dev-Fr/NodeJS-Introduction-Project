<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Received data</title>
</head>
<body>
    <h1>Data</h1>
    <div id="container">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Latitude</th>
                    <th>Longitude</th>
                    <th>Timestamp</th>
                </tr>
            </thead>
            <tbody id="tableBody">
            </tbody>
        </table>

    </div>
    
    <script>
        async function getData() {
            const response = await fetch('/getAllData');
            const data = await response.json();
            // console.log(data);

            data.map((value) => {
                console.log(value);
                const row = document.createElement('tr');
                const tdName = document.createElement('td');
                const tdLat = document.createElement('td');
                const tdLon = document.createElement('td');
                const tdTimestamp = document.createElement('td');
                const tableBody = document.getElementById('tableBody');

                tableBody.append(row);

                if (value.name != '' || value.name == null) {
                    tdName.textContent = value.name;
                }
                else {
                    tdName.textContent = 'Unknown !';
                }
                tdLat.textContent = value.lat;
                tdLon.textContent = value.lon;
                tdTimestamp.textContent = new Date(value.timestamp).toLocaleString();

                row.append(tdName, tdLat, tdLon, tdTimestamp);
            });  
        }
        getData();
    </script>
</body>
</html>